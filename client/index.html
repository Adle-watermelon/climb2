<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>■Climb</title>
  <script src="/config.js"></script>
  <!-- ドット絵風フォント -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(to bottom, #0d0d0d, #1a1a1a);
      font-family: 'Press Start 2P', cursive;
    }
    #title-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      background: linear-gradient(to bottom, #0d0d0d, #1a1a1a);
    }
    #title-screen h1 {
      font-size: 48px;
      color: #fff;
      text-shadow: 4px 4px #000, -2px -2px #333;
      margin-bottom: 50px;
      animation: glow 2s ease-in-out infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 10px #00ffcc, 0 0 20px #00ffcc; }
      to   { text-shadow: 0 0 20px #ff66ff, 0 0 40px #ff66ff; }
    }
    #title-screen input {
      font-family: 'Press Start 2P', cursive;
      font-size: 18px;
      padding: 12px 16px;
      margin-bottom: 30px;
      border: 2px solid #00ffcc;
      border-radius: 8px;
      background: #111;
      color: #fff;
      outline: none;
      text-align: center;
      transition: 0.2s;
      width: 300px;
    }
    #title-screen input:focus {
      border-color: #ff66ff;
      box-shadow: 0 0 10px #ff66ff;
    }
    #title-screen button {
      font-family: 'Press Start 2P', cursive;
      font-size: 20px;
      padding: 14px 32px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(to bottom, #00cc66, #008844);
      color: white;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 2px;
      transition: 0.2s;
    }
    #title-screen button:hover {
      background: linear-gradient(to bottom, #00ff88, #00aa55);
      transform: scale(1.05);
      box-shadow: 0 0 15px #00ff88;
    }
    #game-container {
      display: none; /* 最初は非表示 */
    }
  </style>
</head>
<body>
  <!-- タイトル画面 -->
  <div id="title-screen">
    <h1>CLIMB!</h1>
    <input pattern="[A-Za-z0-9_]+" autocomplete="off" type="text" id="playerName" placeholder="YOUR NAME">
    <button id="startButton">START</button>
  </div>

  <!-- ゲーム用 -->
  <div id="game-container"></div>

  <script type="module" src="client.js"></script>
<script>
  const nameInput = document.getElementById("playerName");

  nameInput.addEventListener("input", () => {
    let newvalue = nameInput.value;

    // 不正文字チェック
    if (/[^A-Za-z0-9_]/.test(newvalue)) {
      alert("Only letters, numbers, and underscores are allowed.");
      newvalue = newvalue.replace(/[^A-Za-z0-9_]/g, "");
    }

    // 12文字制限チェック
    if (newvalue.length > 12) {
      alert("Username must be 12 characters or fewer.");
      newvalue = newvalue.substring(0, 12);
    }

    nameInput.value = newvalue;
  });
</script>

</body>
</html>